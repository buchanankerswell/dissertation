# Include the main target, all, and clean as phony files to avoid command problems
# e.g. with `make clean` or `make all`
.PHONY: dissertation.pdf all clean
# Include main target in all so that `make` and `make all` do the same thing
all: dissertation.pdf

# MAIN LATEXMK RULE

# -pdf tells latexmk to generate PDF directly (instead of DVI).
# -pdflatex="" tells latexmk to call a specific backend with specific options.
# -use-make tells latexmk to call make for generating missing files.
# -c tells latexmk to remove all regeneratable files generated by latex and bibtex or biber  except  dvi,  postscript and  pdf. 

# -interaction=nonstopmode keeps the pdflatex backend from stopping at a
# missing file reference and interactively asking you for an alternative.

dissertation.pdf: dissertation.tex
	latexmk -pdf -pvc -pdflatex -use-make dissertation.tex
clean:
	latexmk -c dissertation.tex